# vim:tw=0:ts=2:sw=2:et:norl
# Author: Landon Bouma <https://tallybark.com/>
# Project: https://github.com/doblabs/easy-as-pypi#ðŸ¥§
# License: MIT
# yamllint disable rule:line-length

---

name: Run branch or unspecial tag checks

on:
  push:
    branches:
      - '*'
    tags:
      - "!v?[0-9]+.[0-9]+.[0-9]+*"

# https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#name
run-name: Run checks on â€˜${{ github.ref_name }}â€™ â€” ${{ github.event.head_commit.message }}

# Cancel active workflow runs for the same ref type and ref.
# - As inspired by Vim's .github/workflows/ci.yaml.
concurrency:
  # E.g., on push, "checks-unspecial-784d511ea5a454ab2b5523dfc39d8e8db01aa32b".
  # - Note: For github.event_name = pull_request, use github.head_ref, not sha.
  group: ${{ github.workflow }}-${{ github.sha }}
  cancel-in-progress: true

jobs:
  branch-checks-runner:
    uses: ./.github/workflows/checks.yml
    secrets: inherit
